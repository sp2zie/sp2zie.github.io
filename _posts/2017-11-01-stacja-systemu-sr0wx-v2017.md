---
layout: post
title: Stacja systemu SR0WX - v2017
date: 2017-11-01
author: Dariusz Mankiewicz, SP2HQY
category: projekty
---

Sieć stacji SR0WX ma za zadanie nadawanie lokalnych komunikatów radiowych zawierających informacje pogodowe i środowiskowe oraz innych ostrzeżeń na terenie całego kraju na zunifikowanej częstotliwości 144,950MHz w ramach służby radioamatorskiej. W roku 2017 podjęliśmy próbę zbudowania nowej wersji stacji systemy SR0WX.

 ![pict1](/assets/images/phocagallery/sq2dk-sq2dk-4043/Studia_techniczne/pict1.JPG) ![pict2](/assets/images/phocagallery/sq2dk-sq2dk-4043/Studia_techniczne/pict2.JPG)
 
Obecnie w naszej stacji jako nadajnik pracuje radiotelefon ASCOM SE-540 http://www.yvesoesch.ch/radio/trxmod/se540/se540.htm przestrojony do pracy w paśmie 2m. Moc nadajnika wynosi 8,9W, modulacja to oczywiście FM. Radiotelefon został zaprogramowany do pracy na wyłącznie jednej częstotliwości, tj. 144,950MHz. Nie jest nadawany żaden ton (ctcss), a maksymalna długość transmisji została programowo ograniczona do 254s. Najistotniejszą częścią stacji jest [jednoukładowy komputer NanoPi Neo](http://wiki.friendlyarm.com/wiki/index.php/NanoPi_NEO) z 256MB pamięci RAM. Jako pamięć masowa używa została karta microSD o pojemności 16GB. Komputer NanoPi Neo ma wszystkie niezbędne części by wypełniać postawione przed nim zadanie, tj, poza wydajnym procesorem posiada również kartę sieciową oraz dźwiękową. Dostępne są też inne układy peryferyjne jak i piny GPIO. Komputer charakteryzuje się niezwykle małymi wymiarami (4x4cm) i niewielką ceną (około 60zł). W naszym wypadku komputer pracuje pod kontrolą [systemu armbian](https://www.armbian.com/) Radiotelefon zasilany jest napięciem 13,8V z zewnętrznego zasilacza, komputer natomiast z tego samego zasilacza poprzez popularną przetwornicę DC-DC step-down opartą o układ LM2596. Część programowa oparta jest o skrypty napisane przez sq9atk modułu sr0wx.py zaczerpnięte ze strony [ostol.pl](http://ostol.pl/stacja-pogodowa-sr0wx-py/). Aby skrypty działały poprawnie konieczne było zainstalowanie kilku brakujących w systemie armbian bibliotek. Skrypty sr0wx pobierają strony http z różnych źródeł, następnie wyłuskują potrzebne informacje i na ich podstawie generowany jest tekst komunikatu. Głos generowany jest na podstawie odtwarzania nagrań pełnych wyrazów (lub fraz) przechowywanych na dysku komputera. Nagrania te w naszym wypadku generowane były komputerowo dzięki usłudze Google translate. Na potrzeby naszej stacji napisany został dodatkowy skrypt w języku Python, który pobiera aktualną prognozę dla obszaru Bałtyku ze strony [baltyk.pogodynka.pl](http://baltyk.pogodynka.pl/). Ponieważ tekst tej prognozy jest znacznie mniej sformalizowany niż pozostałe prognozy użyte w skryptach modułu sr0wx.py, konieczne okazało się stworzenie procedury ładujące brakujące sample. Nadawanie załączane jest poprzez podanie stanu wysokiego na jeden z pinów GPIO komputera NanoPi, który następnie steruje tranzystor npn podłączony do wejścia PTT radiotelefonu.
